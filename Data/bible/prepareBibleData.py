import re
f = open('input.txt',encoding='utf-8')
nikudRegex= re.compile(r'[\u0590-\u05c7]')
chapterVerseRegex=re.compile(r'^.+? ')
nonHebrewRegex= re.compile(r'''[^\u0590-\u05F4.,!?'""() ]''')
lines = f.readlines()
removeShort = lambda lines:filter(lambda x:len(x)>5,lines)
removeNonHebrew = lambda lines:map(lambda x:re.sub(nonHebrewRegex,'',x,count=len(x)),lines)
removeNikud = lambda lines:map(lambda x:re.sub(nikudRegex,'',x,count=len(x)),lines)
removeNoNikudLines = lambda lines:filter(lambda x:nikudRegex.search(x),lines) #match returns non if their is no nikud
removeChapterVerse = lambda lines:map(lambda x:re.sub(chapterVerseRegex,'',x),lines)
replaceHiphens = lambda lines:map(lambda x:x.replace('-',' '),lines)
targetText = list(removeChapterVerse(removeNonHebrew(removeNoNikudLines(replaceHiphens(removeShort(lines))))))
sourceText = list(removeNikud(targetText))
f = open('target.txt','w',encoding='utf-8')
f.write('\n'.join(targetText))
f.close()
f = open('source.txt','w',encoding='utf-8')
f.write('\n'.join(sourceText))
f.close()
